# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –¢–∏–Ω—å–∫–æ—Ñ—Ñ 212 "–ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã"

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
–û—à–∏–±–∫–∞ `–û—à–∏–±–∫–∞ –¢–∏–Ω—å–∫–æ—Ñ—Ñ: –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. (–∫–æ–¥: 212)` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∫–æ–≥–¥–∞ API –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ø–æ–ª—É—á–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∑–∞–ø—Ä–æ—Å–µ.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç OrderId:**
```javascript
// ‚ùå –ë—ã–ª–æ (—Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π):
const orderId = `user_${paymentConfig.userId}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`

// ‚úÖ –°—Ç–∞–ª–æ (–º–∞–∫—Å–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤):
const orderId = paymentConfig.userId 
  ? `u${paymentConfig.userId.substr(0, 8)}${timestamp.substr(-8)}${random}`
  : `o${timestamp.substr(-10)}${random}`
```

### 2. **–û—á–∏—Å—Ç–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è –æ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤:**
```javascript
// ‚úÖ –û—á–∏—â–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –æ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
const cleanDescription = paymentConfig.description
  .replace(/[^\w\s\-\.]/g, '') // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –∫—Ä–æ–º–µ –±—É–∫–≤, —Ü–∏—Ñ—Ä, –ø—Ä–æ–±–µ–ª–æ–≤, –¥–µ—Ñ–∏—Å–æ–≤ –∏ —Ç–æ—á–µ–∫
  .substring(0, 250) // –ú–∞–∫—Å–∏–º—É–º 250 —Å–∏–º–≤–æ–ª–æ–≤
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
```javascript
// ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
if (!requestData.TerminalKey || requestData.TerminalKey.length === 0) {
  throw new Error('TerminalKey –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º')
}
if (requestData.Amount <= 0) {
  throw new Error('Amount –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–µ 0')
}
if (!requestData.OrderId || requestData.OrderId.length === 0) {
  throw new Error('OrderId –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º')
}
if (requestData.OrderId.length > 20) {
  throw new Error('OrderId –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–ª–∏–Ω–Ω–µ–µ 20 —Å–∏–º–≤–æ–ª–æ–≤')
}
if (!requestData.Description || requestData.Description.length === 0) {
  throw new Error('Description –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º')
}
```

### 4. **–£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```javascript
// ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
console.log('üîê –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω:', {
  sortedParams: { ...sortedParams, Password: '[–°–ö–†–´–¢–û]' },
  tokenStringLength: tokenString.length
})

console.log('üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –≤ –¢–∏–Ω—å–∫–æ—Ñ—Ñ:', {
  url: paymentConfig.apiUrl + 'Init',
  data: { 
    TerminalKey: requestData.TerminalKey,
    Amount: requestData.Amount,
    OrderId: requestData.OrderId,
    Description: requestData.Description,
    SuccessURL: requestData.SuccessURL,
    FailURL: requestData.FailURL,
    Token: '[–°–ö–†–´–¢–û]'
  }
})
```

## üîç –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¢–∏–Ω—å–∫–æ—Ñ—Ñ API:

### **OrderId:**
- ‚úÖ –ú–∞–∫—Å–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, –¥–µ—Ñ–∏—Å—ã –∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è
- ‚úÖ –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º

### **Description:**
- ‚úÖ –ú–∞–∫—Å–∏–º—É–º 250 —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, –ø—Ä–æ–±–µ–ª—ã, –¥–µ—Ñ–∏—Å—ã –∏ —Ç–æ—á–∫–∏
- ‚úÖ –ù–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º

### **Amount:**
- ‚úÖ –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–µ 0
- ‚úÖ –í –∫–æ–ø–µ–π–∫–∞—Ö (—É–º–Ω–æ–∂–∞–µ–º –Ω–∞ 100)

### **URLs:**
- ‚úÖ –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º–∏ HTTP/HTTPS URL
- ‚úÖ –ù–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏

## üöÄ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π OrderId** - –º–∞–∫—Å–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π
2. **–û—á–∏—â–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** - –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
4. **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º
5. **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º** - –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

## üîß –û—Ç–ª–∞–¥–∫–∞:

### **–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ —Ç–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ:**
```
üîß –û—Ç–ª–∞–¥–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- VITE_TINKOFF_TERMINAL_KEY: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω
- VITE_TINKOFF_PASSWORD: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω

–°–æ–∑–¥–∞–µ–º –ø–ª–∞—Ç–µ–∂ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {
  userId: "user123",
  orderId: "uuser1234567890123456",
  cleanDescription: "–î–æ—Å—Ç—É–ø –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∞ –ë–ü–î"
}

üîê –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω: {
  sortedParams: { Amount: 20000, Description: "...", ... },
  tokenStringLength: 45
}

üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –≤ –¢–∏–Ω—å–∫–æ—Ñ—Ñ: {
  url: "https://securepay.tinkoff.ru/v2/Init",
  data: { TerminalKey: "...", Amount: 20000, ... }
}
```

## ‚ö†Ô∏è –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤—Å–µ –µ—â–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –≤ Vercel:
   ```
   VITE_TINKOFF_TERMINAL_KEY=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_terminal_key
   VITE_TINKOFF_PASSWORD=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_password
   ```

2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ TerminalKey –∏ Password –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ** (–Ω–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏** - —Ç–µ–ø–µ—Ä—å –æ–Ω–∏ –ø–æ–∫–∞–∂—É—Ç —Ç–æ—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

4. **–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–π–¥–µ—Ç –≤ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –¢–∏–Ω—å–∫–æ—Ñ—Ñ API —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, —á—Ç–æ –¥–æ–ª–∂–Ω–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –æ—à–∏–±–∫—É 212.

–û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞! üéâ
