# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ **—Ä—É—á–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**.

### **–°–∏–º–ø—Ç–æ–º—ã:**
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
- ‚ùå –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É
- ‚úÖ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## üîç –ü—Ä–∏—á–∏–Ω–∞:

`YandexCallback` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ localStorage, –Ω–æ `AuthContext` –Ω–µ –∑–Ω–∞–µ—Ç –æ–± —ç—Ç–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

### **–ü—Ä–æ–±–ª–µ–º–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
1. `YandexCallback` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ localStorage ‚úÖ
2. `YandexCallback` - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ `/auth` ‚úÖ
3. `AuthContext` - –Ω–µ –∑–Ω–∞–µ—Ç –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ localStorage ‚ùå
4. `AuthScreen` - –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚ùå
5. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - `AuthContext` –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ localStorage ‚úÖ

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

### 1. **–î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ –≤ YandexCallback**

```typescript
// –£–≤–µ–¥–æ–º–ª—è–µ–º AuthContext –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏
window.dispatchEvent(new CustomEvent('yandex-auth-success', { 
  detail: { user: realUser } 
}))

// –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
setTimeout(() => {
  console.log('YandexCallback: –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç')
  navigate('/auth')
}, 100)
```

### 2. **–î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –≤ AuthContext**

```typescript
// –°–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏—è —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å
const handleYandexAuthSuccess = (event: CustomEvent) => {
  console.log('AuthProvider: –ü–æ–ª—É—á–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ yandex-auth-success', event.detail)
  const { user } = event.detail
  
  // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏–∑ —Å–æ–±—ã—Ç–∏—è
  setAuthState({
    user,
    isLoading: false,
    error: null
  })
}

window.addEventListener('yandex-auth-success', handleYandexAuthSuccess as EventListener)
```

### 3. **–û—á–∏—Å—Ç–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏**

```typescript
return () => {
  subscription.unsubscribe()
  window.removeEventListener('yandex-auth-success', handleYandexAuthSuccess as EventListener)
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### **–¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:**
1. `YandexCallback` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ localStorage ‚úÖ
2. `YandexCallback` - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ `yandex-auth-success` ‚úÖ
3. `AuthContext` - –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚úÖ
4. `YandexCallback` - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ `/auth` ‚úÖ
5. `AuthScreen` - –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚úÖ

## üöÄ –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:

### **–í YandexCallback:**
```
YandexCallback: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –≤ localStorage {...}
YandexCallback: –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
```

### **–í AuthContext:**
```
AuthProvider: –ü–æ–ª—É—á–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ yandex-auth-success {...}
```

### **–í AuthScreen:**
```
AuthScreen: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω {...}
AuthScreen: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ UserProfile –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {...}
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞:

–¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å:
- ‚úÖ **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É** –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –∏–∑ –Ø–Ω–¥–µ–∫—Å API
- ‚úÖ **–ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥** –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
- ‚úÖ **–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ** –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å –µ—â–µ —Ä–∞–∑ - —Ç–µ–ø–µ—Ä—å –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–ª—è—Ç—å—Å—è —Å—Ä–∞–∑—É!
